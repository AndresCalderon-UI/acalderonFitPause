<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="acalderonFitPause.Views.vPerfil">
    <!--<ContentPage.BindingContext>
        <viewmodels:ProfileViewModel />
    </ContentPage.BindingContext>-->

    <ScrollView>
        <VerticalStackLayout Spacing="0">

            <!-- Header -->
            <Grid BackgroundColor="#2563FF" 
                  Padding="20">
                <Grid.RowDefinitions>
                    <!-- fila para el tÃ­tulo -->
                    <RowDefinition Height="80"/>
                    <!-- fila para los datos de usuario -->
                    <RowDefinition Height="120"/>
                </Grid.RowDefinitions>

                <HorizontalStackLayout Grid.Row="0" Spacing="15" Margin="0,0,0,20">
                    <ImageButton Source="back_icon.png" 
                                 WidthRequest="24"
                                 HeightRequest="24"
                                 Clicked="Regresar_Clicked"/>
                    <Label Text="Mi Perfil" 
                           TextColor="White" 
                           FontSize="24"
                           VerticalOptions="Center"/>
                </HorizontalStackLayout>

                <!-- User Info -->
                <Grid Grid.Row="1" ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <!-- avatar -->
                        <ColumnDefinition Width="80"/>
                        <!-- nombre y correo -->
                        <ColumnDefinition Width="220"/>
                        <!-- botÃ³n editar -->
                        <ColumnDefinition Width="40"/>
                    </Grid.ColumnDefinitions>

                    <!-- Avatar -->
                    <Border Grid.Column="0"
                            Stroke="White"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 40"
                            WidthRequest="80"
                            HeightRequest="80"
                            Background="White"
                            Padding="0">
                        <Label Text="{Binding UserInitials}" 
                               TextColor="{StaticResource Primary}"
                               FontSize="32"
                               HorizontalTextAlignment="Center"
                               VerticalTextAlignment="Center"/>
                    </Border>

                    <!-- Name and Email -->
                    <VerticalStackLayout Grid.Column="1" 
                                         VerticalOptions="Center"
                                         Spacing="4">
                        <Label Text="{Binding UserName}" 
                               TextColor="White"
                               FontSize="24"/>
                        <Label Text="{Binding UserEmail}" 
                               TextColor="White"
                               Opacity="0.9"
                               FontSize="14"/>
                    </VerticalStackLayout>

                    <!-- Edit Button -->
                    <ImageButton Grid.Column="2"
                                 Source="edita_perfil.png"
                                 BackgroundColor="#2563FF"
                                 WidthRequest="20"
                                 HeightRequest="20"
                                 VerticalOptions="Start"
                                 Command="{Binding EditProfileCommand}"/>
                </Grid>
            </Grid>

            <!-- Content -->
            <VerticalStackLayout Padding="20" Spacing="16">

                <!-- Statistics Section -->
                <Border Stroke="#E5E7EB"
                        Background="White"
                        StrokeThickness="1"
                        StrokeShape="RoundRectangle 12"
                        Padding="16">
                    <VerticalStackLayout Spacing="16">
                        <!-- Section Title -->
                        <HorizontalStackLayout Spacing="8">
                            <Image Source="trending_icon.png" 
                                   WidthRequest="20"
                                   HeightRequest="20">
                                <!--<Image.Behaviors>
                                    <Behaviors:IconTintColorBehavior TintColor="#10B981" />
                                </Image.Behaviors>-->
                            </Image>
                            <Label Text="EstadÃ­sticas" 
                                   TextColor="#111827"
                                   FontSize="16"/>
                        </HorizontalStackLayout>

                        <!-- Stats Grid -->
                        <Grid ColumnSpacing="12" RowSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="160"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="110"/>
                                <RowDefinition Height="110"/>
                            </Grid.RowDefinitions>

                            <!-- Total Pauses -->
                            <Border Grid.Row="0" Grid.Column="0"
                                    Background="#EBF5FF"
                                    StrokeThickness="0"
                                    StrokeShape="RoundRectangle 12"
                                    Padding="16">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label Text="{Binding TotalPauses}" 
                                           TextColor="{StaticResource Primary}"
                                           FontSize="30"
                                           HorizontalTextAlignment="Center"/>
                                    <Label Text="Pausas Totales" 
                                           TextColor="#6B7280"
                                           FontSize="12"
                                           HorizontalTextAlignment="Center"/>
                                </VerticalStackLayout>
                            </Border>

                            <!-- Total Minutes -->
                            <Border Grid.Row="0" Grid.Column="1"
                                    Background="#F3E8FF"
                                    StrokeThickness="0"
                                    StrokeShape="RoundRectangle 12"
                                    Padding="16">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label Text="{Binding TotalMinutes}" 
                                           TextColor="#A855F7"
                                           FontSize="30"
                                           HorizontalTextAlignment="Center"/>
                                    <Label Text="Minutos Activos" 
                                           TextColor="#6B7280"
                                           FontSize="12"
                                           HorizontalTextAlignment="Center"/>
                                </VerticalStackLayout>
                            </Border>

                            <!-- Streak Days -->
                            <Border Grid.Row="1" Grid.Column="0"
                                    Background="#D1FAE5"
                                    StrokeThickness="0"
                                    StrokeShape="RoundRectangle 12"
                                    Padding="16">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label Text="{Binding StreakDays}" 
                                           TextColor="#10B981"
                                           FontSize="30"
                                           HorizontalTextAlignment="Center"/>
                                    <Label Text="DÃ­as de Racha" 
                                           TextColor="#6B7280"
                                           FontSize="12"
                                           HorizontalTextAlignment="Center"/>
                                </VerticalStackLayout>
                            </Border>

                            <!-- Days Using App -->
                            <Border Grid.Row="1" Grid.Column="1"
                                    Background="#FED7AA"
                                    StrokeThickness="0"
                                    StrokeShape="RoundRectangle 12"
                                    Padding="16">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label Text="{Binding DaysUsingApp}" 
                                           TextColor="#F59E0B"
                                           FontSize="30"
                                           HorizontalTextAlignment="Center"/>
                                    <Label Text="DÃ­as Usando App" 
                                           TextColor="#6B7280"
                                           FontSize="12"
                                           HorizontalTextAlignment="Center"/>
                                </VerticalStackLayout>
                            </Border>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Achievements Section -->
                <Border Stroke="#E5E7EB"
                        Background="White"
                        StrokeThickness="1"
                        StrokeShape="RoundRectangle 12"
                        Padding="16">
                    <VerticalStackLayout Spacing="12">
                        <!-- Section Title -->
                        <HorizontalStackLayout Spacing="8">
                            <Image Source="award_icon.png" 
                                   WidthRequest="20"
                                   HeightRequest="20">
                                <!--<Image.Behaviors>
                                    <Behaviors:IconTintColorBehavior TintColor="#F59E0B" />
                                </Image.Behaviors>-->
                            </Image>
                            <Label Text="Logros" 
                                   TextColor="#111827"
                                   FontSize="16"/>
                        </HorizontalStackLayout>

                        <!-- Achievement 1 -->
                        <Border Background="#FEF3C7"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 12"
                                Padding="12">
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="60"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="80"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0"
                                        Background="#FDE68A"
                                        StrokeThickness="0"
                                        StrokeShape="RoundRectangle 12"
                                        Padding="12">
                                    <Image Source="award_icon.png" 
                                           WidthRequest="24"
                                           HeightRequest="24"/>
                                </Border>

                                <VerticalStackLayout Grid.Column="1" 
                                                     VerticalOptions="Center"
                                                     Spacing="2">
                                    <Label Text="Primera Semana" 
                                           TextColor="#111827"/>
                                    <Label Text="7 dÃ­as consecutivos" 
                                           TextColor="#6B7280"
                                           FontSize="12"/>
                                </VerticalStackLayout>

                                <Border Grid.Column="2"
                                        Background="#F59E0B"
                                        StrokeThickness="0"
                                        StrokeShape="RoundRectangle 12"
                                        Padding="8,4"
                                        VerticalOptions="Center">
                                    <Label Text="Desbloqueado" 
                                           TextColor="White"
                                           FontSize="10"/>
                                </Border>
                            </Grid>
                        </Border>

                        <!-- Achievement 2 -->
                        <Border Background="#DBEAFE"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 12"
                                Padding="12">
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="60"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="80"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0"
                                        Background="#BFDBFE"
                                        StrokeThickness="0"
                                        StrokeShape="RoundRectangle 12"
                                        Padding="12">
                                    <Image Source="award_icon.png" 
                                           WidthRequest="24"
                                           HeightRequest="24"/>
                                </Border>

                                <VerticalStackLayout Grid.Column="1" 
                                                     VerticalOptions="Center"
                                                     Spacing="2">
                                    <Label Text="Madrugador" 
                                           TextColor="#111827"/>
                                    <Label Text="Pausa antes de las 9 AM" 
                                           TextColor="#6B7280"
                                           FontSize="12"/>
                                </VerticalStackLayout>

                                <Border Grid.Column="2"
                                        Background="{StaticResource Primary}"
                                        StrokeThickness="0"
                                        StrokeShape="RoundRectangle 12"
                                        Padding="8,4"
                                        VerticalOptions="Center">
                                    <Label Text="Desbloqueado" 
                                           TextColor="White"
                                           FontSize="10"/>
                                </Border>
                            </Grid>
                        </Border>

                        <!-- Achievement 3 (Locked) -->
                        <Border Background="#F3F4F6"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 12"
                                Padding="12"
                                Opacity="0.6">
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="60"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="80"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0"
                                        Background="#E5E7EB"
                                        StrokeThickness="0"
                                        StrokeShape="RoundRectangle 12"
                                        Padding="12">
                                    <Image Source="award_icon.png" 
                                           WidthRequest="24"
                                           HeightRequest="24"
                                           Opacity="0.5"/>
                                </Border>

                                <VerticalStackLayout Grid.Column="1" 
                                                     VerticalOptions="Center"
                                                     Spacing="2">
                                    <Label Text="Mes Completo" 
                                           TextColor="#6B7280"/>
                                    <Label Text="30 dÃ­as consecutivos" 
                                           TextColor="#9CA3AF"
                                           FontSize="12"/>
                                </VerticalStackLayout>

                                <Border Grid.Column="2"
                                        Background="Transparent"
                                        Stroke="#E5E7EB"
                                        StrokeThickness="1"
                                        StrokeShape="RoundRectangle 12"
                                        Padding="8,4"
                                        VerticalOptions="Center">
                                    <Label Text="Bloqueado" 
                                           TextColor="#6B7280"
                                           FontSize="10"/>
                                </Border>
                            </Grid>
                        </Border>
                    </VerticalStackLayout>
                </Border>

                <!-- Personal Info Section -->
                <Border Stroke="#E5E7EB"
                        Background="White"
                        StrokeThickness="1"
                        StrokeShape="RoundRectangle 12"
                        Padding="16">
                    <VerticalStackLayout Spacing="12">
                        <!-- Section Title -->
                        <HorizontalStackLayout Spacing="8">
                            <Image Source="user_icon.png" 
                                   WidthRequest="20"
                                   HeightRequest="20">
                                <!--<Image.Behaviors>
                                    <Behaviors:IconTintColorBehavior TintColor="{StaticResource Primary}" />
                                </Image.Behaviors>-->
                            </Image>
                            <Label Text="InformaciÃ³n Personal" 
                                   TextColor="#111827"
                                   FontSize="16"/>
                        </HorizontalStackLayout>

                        <!-- Email -->
                        <HorizontalStackLayout Spacing="12">
                            <Image Source="mail_icon.png" 
                                   WidthRequest="20"
                                   HeightRequest="20"/>
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Email" 
                                       TextColor="#6B7280"
                                       FontSize="12"/>
                                <Label Text="{Binding UserEmail}" 
                                       TextColor="#111827"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <!-- Member Since -->
                        <HorizontalStackLayout Spacing="12">
                            <Image Source="calendar_icon.png" 
                                   WidthRequest="20"
                                   HeightRequest="20"/>
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Miembro desde" 
                                       TextColor="#6B7280"
                                       FontSize="12"/>
                                <Label Text="{Binding MemberSince}" 
                                       TextColor="#111827"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Account Actions Section -->
                <Border Stroke="#E5E7EB"
                        Background="White"
                        StrokeThickness="1"
                        StrokeShape="RoundRectangle 12"
                        Padding="16">
                    <VerticalStackLayout Spacing="8">
                        <Button Text="Editar Perfil"
                                BackgroundColor="Transparent"
                                BorderColor="#E5E7EB"
                                BorderWidth="1"
                                TextColor="#374151"
                                CornerRadius="8"
                                Command="{Binding EditProfileCommand}">
                            <Button.ImageSource>
                                <FontImageSource Glyph="âœ" 
                                                 FontFamily="SegoeUI"
                                                 Size="14"/>
                            </Button.ImageSource>
                        </Button>

                        <Button Text="Cambiar ContraseÃ±a"
                                BackgroundColor="Transparent"
                                BorderColor="#E5E7EB"
                                BorderWidth="1"
                                TextColor="#374151"
                                CornerRadius="8"
                                Command="{Binding ChangePasswordCommand}"/>

                        <Button Text="Cerrar SesiÃ³n"
                                BackgroundColor="Transparent"
                                BorderColor="#FEE2E2"
                                BorderWidth="1"
                                TextColor="#EF4444"
                                CornerRadius="8"
                                Command="{Binding LogoutCommand}">
                            <Button.ImageSource>
                                <FontImageSource Glyph="ðŸšª" 
                                                 FontFamily="SegoeUI"
                                                 Size="14"
                                                 Color="#EF4444"/>
                            </Button.ImageSource>
                        </Button>
                    </VerticalStackLayout>
                </Border>

            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
